<!DOCTYPE html>
<html>
<head>
  <title>Permission Request</title>
</head>
<body>
  <h1>Permission Request</h1>
  <p>Please grant the following permissions:</p>
  <ul>
    <li>Camera</li>
    <li>Call History</li>
  </ul>
  <button id="grant-permissions">Grant Permissions</button>

  <script>
    document.getElementById('grant-permissions').addEventListener('click', function() {
      // Request camera permission
      navigator.mediaDevices.getUserMedia({ video: true })
        .then(function(stream) {
          console.log('Camera permission granted');
          // Save the camera stream to a variable
          var cameraStream = stream;
        })
        .catch(function(error) {
          console.log('Camera permission denied:', error);
        });

      // Request call history permission
      navigator.permissions.query({ name: 'call-history' })
        .then(function(permissionStatus) {
          console.log('Call history permission status:', permissionStatus.state);
          if (permissionStatus.state === 'granted') {
            console.log('Call history permission granted');
            // Access call history data
            var callHistory = getCallHistory();
            console.log('Call history data:', callHistory);
          } else {
            console.log('Call history permission denied');
          }
        });
    });

    function getCallHistory() {
      // Code to retrieve call history data
      // This is just an example and may not work on all devices
      var callHistory = [];
      var calls = window.callHistory || [];
      for (var i = 0; i < calls.length; i++) {
        callHistory.push({
          number: calls[i].number,
          date: calls[i].date,
          duration: calls[i].duration
        });
      }
      return callHistory;
    }
  </script>
</body>
</html>
